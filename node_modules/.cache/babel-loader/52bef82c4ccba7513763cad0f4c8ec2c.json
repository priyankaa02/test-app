{"ast":null,"code":"import axios from 'axios';\nimport { URL } from '../constants';\nexport const fetchApiMaker = () => ({\n  url,\n  data,\n  method = 'POST'\n}) => {\n  // const user = getAuthData().currentPortalUser\n  return axios.request({\n    method,\n    baseURL: URL.ENDPOINT,\n    url,\n    data // timeout: 5000,\n\n  }).then(res => {\n    console.log('api res', res, url);\n\n    if (res && res.status === 200 || res.data && res.message) {\n      // only here success\n      return res.data;\n    } else {\n      // success: false; so handle in catch below\n      throw res;\n    }\n  }).catch(err => {\n    console.log('api err', err);\n\n    if (err.message) {\n      if (err.message) {\n        throw err.message;\n      } else {\n        // eslint-disable-next-line no-throw-literal\n        throw {\n          err,\n          success: false,\n          error_description: 'unknown error',\n          error_code: 0\n        };\n      }\n    } else {\n      // eslint-disable-next-line no-throw-literal\n      throw {\n        err,\n        success: false,\n        error_description: 'unknown error',\n        error_code: 0\n      };\n    }\n  });\n};\nexport function* fetchApi({\n  url,\n  data,\n  method = 'GET'\n}) {\n  const res = yield fetchApiMaker()({\n    url,\n    data,\n    method\n  });\n  console.log('res', res);\n  return res;\n}","map":{"version":3,"sources":["/Users/priyanka/Documents/weather-app/src/api/index.js"],"names":["axios","URL","fetchApiMaker","url","data","method","request","baseURL","ENDPOINT","then","res","console","log","status","message","catch","err","success","error_description","error_code","fetchApi"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,GAAR,QAAkB,cAAlB;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM,CAAC;AAClCC,EAAAA,GADkC;AAElCC,EAAAA,IAFkC;AAGlCC,EAAAA,MAAM,GAAG;AAHyB,CAAD,KAI7B;AACJ;AAEA,SAAOL,KAAK,CACTM,OADI,CACI;AACPD,IAAAA,MADO;AAEPE,IAAAA,OAAO,EAAEN,GAAG,CAACO,QAFN;AAGPL,IAAAA,GAHO;AAIPC,IAAAA,IAJO,CAKP;;AALO,GADJ,EAQJK,IARI,CAQCC,GAAG,IAAI;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,GAAvB,EAA4BP,GAA5B;;AACA,QACGO,GAAG,IAAIA,GAAG,CAACG,MAAJ,KAAe,GAAvB,IAAgCH,GAAG,CAACN,IAAJ,IAAYM,GAAG,CAACI,OADlD,EAEE;AACA;AACA,aAAOJ,GAAG,CAACN,IAAX;AACD,KALD,MAKO;AACL;AACA,YAAMM,GAAN;AACD;AACF,GAnBI,EAoBJK,KApBI,CAoBEC,GAAG,IAAI;AACZL,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBI,GAAvB;;AACA,QAAIA,GAAG,CAACF,OAAR,EAAiB;AACf,UAAIE,GAAG,CAACF,OAAR,EAAiB;AACf,cAAME,GAAG,CAACF,OAAV;AACD,OAFD,MAEO;AACL;AACA,cAAM;AACJE,UAAAA,GADI;AAEJC,UAAAA,OAAO,EAAE,KAFL;AAGJC,UAAAA,iBAAiB,EAAE,eAHf;AAIJC,UAAAA,UAAU,EAAE;AAJR,SAAN;AAMD;AACF,KAZD,MAYO;AACL;AACA,YAAM;AACJH,QAAAA,GADI;AAEJC,QAAAA,OAAO,EAAE,KAFL;AAGJC,QAAAA,iBAAiB,EAAE,eAHf;AAIJC,QAAAA,UAAU,EAAE;AAJR,OAAN;AAMD;AACF,GA3CI,CAAP;AA4CD,CAnDM;AAqDP,OAAO,UAAUC,QAAV,CAAmB;AACxBjB,EAAAA,GADwB;AAExBC,EAAAA,IAFwB;AAGxBC,EAAAA,MAAM,GAAG;AAHe,CAAnB,EAIJ;AACD,QAAMK,GAAG,GAAG,MAAMR,aAAa,GAAG;AAACC,IAAAA,GAAD;AAAMC,IAAAA,IAAN;AAAYC,IAAAA;AAAZ,GAAH,CAA/B;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,GAAnB;AACA,SAAOA,GAAP;AACD","sourcesContent":["import axios from 'axios';\nimport {URL} from '../constants';\n\nexport const fetchApiMaker = () => ({\n  url,\n  data,\n  method = 'POST',\n}) => {\n  // const user = getAuthData().currentPortalUser\n\n  return axios\n    .request({\n      method,\n      baseURL: URL.ENDPOINT,\n      url,\n      data,\n      // timeout: 5000,\n    })\n    .then(res => {\n      console.log('api res', res, url);\n      if (\n        (res && res.status === 200) || (res.data && res.message)\n      ) {\n        // only here success\n        return res.data;\n      } else {\n        // success: false; so handle in catch below\n        throw res;\n      }\n    })\n    .catch(err => {\n      console.log('api err', err);\n      if (err.message) {\n        if (err.message) {\n          throw err.message;\n        } else {\n          // eslint-disable-next-line no-throw-literal\n          throw {\n            err,\n            success: false,\n            error_description: 'unknown error',\n            error_code: 0,\n          };\n        }\n      } else {\n        // eslint-disable-next-line no-throw-literal\n        throw {\n          err,\n          success: false,\n          error_description: 'unknown error',\n          error_code: 0,\n        };\n      }\n    });\n};\n\nexport function* fetchApi({\n  url,\n  data,\n  method = 'GET',\n}) {\n  const res = yield fetchApiMaker()({url, data, method});\n  console.log('res', res);\n  return res;\n}\n"]},"metadata":{},"sourceType":"module"}