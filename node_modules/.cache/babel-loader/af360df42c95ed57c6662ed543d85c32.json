{"ast":null,"code":"import _regeneratorRuntime from\"/Users/priyanka/Documents/weather-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(fetchApi);import axios from'axios';import{URL}from'../constants';export var fetchApiMaker=function fetchApiMaker(){return function(_ref){var url=_ref.url,_ref$method=_ref.method,method=_ref$method===void 0?'GET':_ref$method;// const user = getAuthData().currentPortalUser\nreturn axios.request({method:method,baseURL:URL.ENDPOINT,url:url// timeout: 5000,\n}).then(function(res){console.log('api res',res,url);if(res&&res.status===200||res.data&&res.message){// only here success\nreturn res.data;}else{// success: false; so handle in catch below\nthrow res;}}).catch(function(err){console.log('api err',err);if(err.message){if(err.message){throw err.message;}else{// eslint-disable-next-line no-throw-literal\nthrow{err:err,success:false,error_description:'unknown error',error_code:0};}}else{// eslint-disable-next-line no-throw-literal\nthrow{err:err,success:false,error_description:'unknown error',error_code:0};}});};};export function fetchApi(_ref2){var url,_ref2$method,method,res;return _regeneratorRuntime.wrap(function fetchApi$(_context){while(1){switch(_context.prev=_context.next){case 0:url=_ref2.url,_ref2$method=_ref2.method,method=_ref2$method===void 0?'GET':_ref2$method;console.log('url',url);_context.next=4;return fetchApiMaker()({url:url,method:method});case 4:res=_context.sent;console.log('res',res);return _context.abrupt(\"return\",res);case 7:case\"end\":return _context.stop();}}},_marked);}","map":{"version":3,"sources":["/Users/priyanka/Documents/weather-app/src/api/index.js"],"names":["fetchApi","axios","URL","fetchApiMaker","url","method","request","baseURL","ENDPOINT","then","res","console","log","status","data","message","catch","err","success","error_description","error_code"],"mappings":"iKAsDiBA,Q,EAtDjB,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,GAAR,KAAkB,cAAlB,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,SAAM,eAG7B,IAFJC,CAAAA,GAEI,MAFJA,GAEI,kBADJC,MACI,CADJA,MACI,sBADK,KACL,aACJ;AAEA,MAAOJ,CAAAA,KAAK,CACTK,OADI,CACI,CACPD,MAAM,CAANA,MADO,CAEPE,OAAO,CAAEL,GAAG,CAACM,QAFN,CAGPJ,GAAG,CAAHA,GACA;AAJO,CADJ,EAOJK,IAPI,CAOC,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBF,GAAvB,CAA4BN,GAA5B,EACA,GACGM,GAAG,EAAIA,GAAG,CAACG,MAAJ,GAAe,GAAvB,EAAgCH,GAAG,CAACI,IAAJ,EAAYJ,GAAG,CAACK,OADlD,CAEE,CACA;AACA,MAAOL,CAAAA,GAAG,CAACI,IAAX,CACD,CALD,IAKO,CACL;AACA,KAAMJ,CAAAA,GAAN,CACD,CACF,CAlBI,EAmBJM,KAnBI,CAmBE,SAAAC,GAAG,CAAI,CACZN,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBK,GAAvB,EACA,GAAIA,GAAG,CAACF,OAAR,CAAiB,CACf,GAAIE,GAAG,CAACF,OAAR,CAAiB,CACf,KAAME,CAAAA,GAAG,CAACF,OAAV,CACD,CAFD,IAEO,CACL;AACA,KAAM,CACJE,GAAG,CAAHA,GADI,CAEJC,OAAO,CAAE,KAFL,CAGJC,iBAAiB,CAAE,eAHf,CAIJC,UAAU,CAAE,CAJR,CAAN,CAMD,CACF,CAZD,IAYO,CACL;AACA,KAAM,CACJH,GAAG,CAAHA,GADI,CAEJC,OAAO,CAAE,KAFL,CAGJC,iBAAiB,CAAE,eAHf,CAIJC,UAAU,CAAE,CAJR,CAAN,CAMD,CACF,CA1CI,CAAP,CA2CD,CAjD4B,EAAtB,CAmDP,MAAO,SAAUpB,CAAAA,QAAV,yJACLI,GADK,OACLA,GADK,oBAELC,MAFK,CAELA,MAFK,uBAEI,KAFJ,cAILM,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBR,GAAnB,EAJK,gBAKO,MAAMD,CAAAA,aAAa,GAAG,CAACC,GAAG,CAAHA,GAAD,CAAMC,MAAM,CAANA,MAAN,CAAH,CAAnB,CALP,OAKCK,GALD,eAMLC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,GAAnB,EANK,gCAOEA,GAPF","sourcesContent":["import axios from 'axios';\nimport {URL} from '../constants';\n\nexport const fetchApiMaker = () => ({\n  url,\n  method = 'GET',\n}) => {\n  // const user = getAuthData().currentPortalUser\n\n  return axios\n    .request({\n      method,\n      baseURL: URL.ENDPOINT,\n      url,\n      // timeout: 5000,\n    })\n    .then(res => {\n      console.log('api res', res, url);\n      if (\n        (res && res.status === 200) || (res.data && res.message)\n      ) {\n        // only here success\n        return res.data;\n      } else {\n        // success: false; so handle in catch below\n        throw res;\n      }\n    })\n    .catch(err => {\n      console.log('api err', err);\n      if (err.message) {\n        if (err.message) {\n          throw err.message;\n        } else {\n          // eslint-disable-next-line no-throw-literal\n          throw {\n            err,\n            success: false,\n            error_description: 'unknown error',\n            error_code: 0,\n          };\n        }\n      } else {\n        // eslint-disable-next-line no-throw-literal\n        throw {\n          err,\n          success: false,\n          error_description: 'unknown error',\n          error_code: 0,\n        };\n      }\n    });\n};\n\nexport function* fetchApi({\n  url,\n  method = 'GET',\n}) {\n  console.log('url', url);\n  const res = yield fetchApiMaker()({url, method});\n  console.log('res', res);\n  return res;\n}\n"]},"metadata":{},"sourceType":"module"}